id: CT-TEXT-001
kind: fail
description: font_family must be in capabilities.font_families
request:
  method: POST
  path: /api/ai/v1/projects/{P}/clips
  headers:
    Idempotency-Key: test-text-001
    If-Match: etag-1
  body:
    options: { validate_only: true, return_diff: false }
    clip:
      type: text
      layer_id: "{L1}"
      start_ms: 5000
      duration_ms: 2000
      transform:
        position: { x: 0, y: 0 }
        scale: { x: 1, y: 1 }
        rotation: 0
        opacity: 1
        anchor: { x: 0.5, y: 0.5 }
      text_style:
        text: "Hello"
        font_family: "Comic Sans"
        font_size: 48
        font_weight: 700
        line_height: 1.2
        color: "#FFFFFF"
        align: center
context:
  fixture: base.yaml
expect:
  status: 400
  error_code: UNSUPPORTED_FONT_FAMILY
  suggested_fix: "Choose a font from /capabilities.font_families"
